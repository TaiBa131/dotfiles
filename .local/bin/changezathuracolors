#!/usr/bin/env sh

. "${HOME}/.cache/wal/colors.sh"
alias bemenu='bemenu --tf "$background" --fb "$background" --hf "$background" --nb "$background" --sb "$background" --scb "$background" --tb "$foreground" --ff "$foreground"  --nf "$foreground"  --hb "$foreground"  --sf "$foreground"  --scf "$foreground" --fn "sans 9.5" -b -n --scrollbar auto'

setmonochrome() {
	sed -i '1s/.*/set\ recolor-darkcolor\ \\\#000000/' ${HOME}/.config/zathura/zathuracolors
	sed -i '2s/.*/set\ recolor-lightcolor\ \\\#FFFFFF/' ${HOME}/.config/zathura/zathuracolors
}

setsepia() {
	sed -i '1s/.*/set\ recolor-darkcolor\ \\\#000000/' ${HOME}/.config/zathura/zathuracolors
	sed -i '2s/.*/set\ recolor-lightcolor\ \\\#EFE0B9/' ${HOME}/.config/zathura/zathuracolors
}

setgrey() {
	sed -i '1s/.*/set\ recolor-darkcolor\ \\\#000000/' ${HOME}/.config/zathura/zathuracolors
	sed -i '2s/.*/set\ recolor-lightcolor\ \\\#CCCCCC/' ${HOME}/.config/zathura/zathuracolors
}

setnight() {
	sed -i '1s/^/#/;2s/^/#/' ~/.config/zathura/zathuracolors
}

setsystem() {
	sed -i "1s/.*/set\ recolor-darkcolor\ \"${foreground}\"/" ${HOME}/.config/zathura/zathuracolors
	sed -i "2s/.*/set\ recolor-lightcolor\ \"${background}\"/" ${HOME}/.config/zathura/zathuracolors
}

#sed -i '1s/^\s*#//;2s/^\s*#//;t;1s/^/#/;2s/^/#/' ~/.config/zathura/zathuracolors


list='Monochrome\nGrey\nSepia\nSystem\nNight\n'
theme=$(printf ${list} | bemenu -i -l $(printf ${list} | wc -l) -p 'Choose a secondary theme: ')
[ -z $theme ] && exit
case $theme in
	Monochrome) setmonochrome;;
	Sepia) setsepia;;
	Night) setnight;;
	Grey) setgrey;;
	System) setsystem;;
esac
FILE="$1"
pkill -f "zathura -- $FILE"
zathura -- "$FILE"
